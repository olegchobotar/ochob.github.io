"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[29920,44771],{48775:(t,e,n)=>{n.d(e,{sc:()=>l});var i=n(99393),s=n(98071);let a=(t,e,n)=>t&e^~t&n,r=(t,e,n)=>t&e^t&n^e&n;class h extends s.Vw{constructor(t,e,n,i){super(),this.blockLen=t,this.outputLen=e,this.padOffset=n,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=(0,s.O8)(this.buffer)}update(t){(0,i.CC)(this);let{view:e,buffer:n,blockLen:a}=this,r=(t=(0,s.ZJ)(t)).length;for(let i=0;i<r;){let h=Math.min(a-this.pos,r-i);if(h===a){let e=(0,s.O8)(t);for(;a<=r-i;i+=a)this.process(e,i);continue}n.set(t.subarray(i,i+h),this.pos),this.pos+=h,i+=h,this.pos===a&&(this.process(e,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){(0,i.CC)(this),(0,i.Ht)(t,this),this.finished=!0;let{buffer:e,view:n,blockLen:a,isLE:r}=this,{pos:h}=this;e[h++]=128,this.buffer.subarray(h).fill(0),this.padOffset>a-h&&(this.process(n,0),h=0);for(let t=h;t<a;t++)e[t]=0;!function(t,e,n,i){if("function"==typeof t.setBigUint64)return t.setBigUint64(e,n,i);let s=BigInt(32),a=BigInt(0xffffffff),r=Number(n>>s&a),h=Number(n&a),o=i?4:0,c=i?0:4;t.setUint32(e+o,r,i),t.setUint32(e+c,h,i)}(n,a-8,BigInt(8*this.length),r),this.process(n,0);let o=(0,s.O8)(t),c=this.outputLen;if(c%4)throw Error("_sha2: outputLen should be aligned to 32bit");let u=c/4,f=this.get();if(u>f.length)throw Error("_sha2: outputLen bigger than state");for(let t=0;t<u;t++)o.setUint32(4*t,f[t],r)}digest(){let{buffer:t,outputLen:e}=this;this.digestInto(t);let n=t.slice(0,e);return this.destroy(),n}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());let{blockLen:e,buffer:n,length:i,finished:s,destroyed:a,pos:r}=this;return t.length=i,t.pos=r,t.finished=s,t.destroyed=a,i%e&&t.buffer.set(n),t}}let o=new Uint32Array([0x428a2f98,0x71374491,0xb5c0fbcf,0xe9b5dba5,0x3956c25b,0x59f111f1,0x923f82a4,0xab1c5ed5,0xd807aa98,0x12835b01,0x243185be,0x550c7dc3,0x72be5d74,0x80deb1fe,0x9bdc06a7,0xc19bf174,0xe49b69c1,0xefbe4786,0xfc19dc6,0x240ca1cc,0x2de92c6f,0x4a7484aa,0x5cb0a9dc,0x76f988da,0x983e5152,0xa831c66d,0xb00327c8,0xbf597fc7,0xc6e00bf3,0xd5a79147,0x6ca6351,0x14292967,0x27b70a85,0x2e1b2138,0x4d2c6dfc,0x53380d13,0x650a7354,0x766a0abb,0x81c2c92e,0x92722c85,0xa2bfe8a1,0xa81a664b,0xc24b8b70,0xc76c51a3,0xd192e819,0xd6990624,0xf40e3585,0x106aa070,0x19a4c116,0x1e376c08,0x2748774c,0x34b0bcb5,0x391c0cb3,0x4ed8aa4a,0x5b9cca4f,0x682e6ff3,0x748f82ee,0x78a5636f,0x84c87814,0x8cc70208,0x90befffa,0xa4506ceb,0xbef9a3f7,0xc67178f2]),c=new Uint32Array([0x6a09e667,0xbb67ae85,0x3c6ef372,0xa54ff53a,0x510e527f,0x9b05688c,0x1f83d9ab,0x5be0cd19]),u=new Uint32Array(64);class f extends h{constructor(){super(64,32,8,!1),this.A=0|c[0],this.B=0|c[1],this.C=0|c[2],this.D=0|c[3],this.E=0|c[4],this.F=0|c[5],this.G=0|c[6],this.H=0|c[7]}get(){let{A:t,B:e,C:n,D:i,E:s,F:a,G:r,H:h}=this;return[t,e,n,i,s,a,r,h]}set(t,e,n,i,s,a,r,h){this.A=0|t,this.B=0|e,this.C=0|n,this.D=0|i,this.E=0|s,this.F=0|a,this.G=0|r,this.H=0|h}process(t,e){for(let n=0;n<16;n++,e+=4)u[n]=t.getUint32(e,!1);for(let t=16;t<64;t++){let e=u[t-15],n=u[t-2],i=(0,s.Ow)(e,7)^(0,s.Ow)(e,18)^e>>>3,a=(0,s.Ow)(n,17)^(0,s.Ow)(n,19)^n>>>10;u[t]=a+u[t-7]+i+u[t-16]|0}let{A:n,B:i,C:h,D:c,E:f,F:l,G:x,H:d}=this;for(let t=0;t<64;t++){let e=d+((0,s.Ow)(f,6)^(0,s.Ow)(f,11)^(0,s.Ow)(f,25))+a(f,l,x)+o[t]+u[t]|0,p=((0,s.Ow)(n,2)^(0,s.Ow)(n,13)^(0,s.Ow)(n,22))+r(n,i,h)|0;d=x,x=l,l=f,f=c+e|0,c=h,h=i,i=n,n=e+p|0}n=n+this.A|0,i=i+this.B|0,h=h+this.C|0,c=c+this.D|0,f=f+this.E|0,l=l+this.F|0,x=x+this.G|0,d=d+this.H|0,this.set(n,i,h,c,f,l,x,d)}roundClean(){u.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}let l=(0,s.ld)(()=>new f)},23779:(t,e,n)=>{n.d(e,{B:()=>i});async function i(t,e){return await t({method:"eth_sendRawTransaction",params:[e]})}},29920:(t,e,n)=>{n.d(e,{getZkGasFees:()=>j,f:()=>O,sendEip712Transaction:()=>_,a:()=>A});var i=n(80477),s=n(95389),a=n(76397),r=n(98979);function h(t){if(t<256)return 1;if(t<65536)return 2;if(t<0x1000000)return 3;if(t<0x100000000)return 4;throw new i.C("Length is too large.")}var o=n(23779),c=n(9751),u=n(75231),f=n(10354);function l(t){if(["string","number"].includes(typeof t)&&!Number.isInteger(Number(t)))throw Error(`Expected value to be an integer to convert to a bigint, got ${t} of type ${typeof t}`);return t instanceof Uint8Array?BigInt((0,f.EY)(t)):BigInt(t)}let x=(t,e)=>"bigint"==typeof t?e(t):Array.isArray(t)?t.map(t=>x(t,e)):t&&"object"==typeof t?Object.fromEntries(Object.entries(t).map(([t,n])=>[t,x(n,e)])):t;var d=n(44771),p=n(36431),g=n(50856),y=n(58248),b=n(33085),m=n(48775),w=n(11601);let B=32n*n(26542).Au;class v extends i.C{constructor({givenLength:t,maxBytecodeSize:e}){super(`Bytecode cannot be longer than ${e} bytes. Given length: ${t}`,{name:"BytecodeLengthExceedsMaxSizeError"})}}class P extends i.C{constructor({givenLengthInWords:t}){super(`Bytecode length in 32-byte words must be odd. Given length in words: ${t}`,{name:"BytecodeLengthInWordsMustBeOddError"})}}class U extends i.C{constructor({givenLength:t}){super(`The bytecode length in bytes must be divisible by 32. Given length: ${t}`,{name:"BytecodeLengthMustBeDivisibleBy32Error"})}}let I=t=>{let e=function(t){let{gas:e,nonce:n,to:i,from:s,value:h,maxFeePerGas:o,maxPriorityFeePerGas:c,paymaster:u,paymasterInput:l,gasPerPubdata:x,data:d,factoryDeps:p}=t;return{txType:113n,from:BigInt(s),to:i?BigInt(i):0n,gasLimit:e??0n,gasPerPubdataByteLimit:x??50000n,maxFeePerGas:o??0n,maxPriorityFeePerGas:c??0n,paymaster:u?BigInt(u):0n,nonce:n?BigInt(n):0n,value:h??0n,data:d||"0x0",factoryDeps:p?.map(t=>f.nj(function(t){let e=(0,a.ZJ)(t);if(e.length%32!=0)throw new U({givenLength:e.length});if(e.length>B)throw new v({givenLength:e.length,maxBytecodeSize:B});let n=function(t,e){let n=(0,m.sc)((0,w.q)(t,{strict:!1})?(0,a.ZJ)(t):t);return"bytes"===((void 0)||"hex")?n:(0,r.nj)(n)}(e),i=(0,a.ZJ)(n),s=e.length/32;if(s%2==0)throw new P({givenLengthInWords:s});let h=(0,a.ZJ)(s),o=(0,b.eV)(h,{size:2}),c=new Uint8Array([1,0]);return i.set(c,0),i.set(o,2),i}(t)))??[],paymasterInput:l||"0x"}}(t);return{domain:{name:"zkSync",version:"2",chainId:t.chainId},types:{Transaction:[{name:"txType",type:"uint256"},{name:"from",type:"uint256"},{name:"to",type:"uint256"},{name:"gasLimit",type:"uint256"},{name:"gasPerPubdataByteLimit",type:"uint256"},{name:"maxFeePerGas",type:"uint256"},{name:"maxPriorityFeePerGas",type:"uint256"},{name:"paymaster",type:"uint256"},{name:"nonce",type:"uint256"},{name:"value",type:"uint256"},{name:"data",type:"bytes"},{name:"factoryDeps",type:"bytes32[]"},{name:"paymasterInput",type:"bytes"}]},primaryType:"Transaction",message:e}};async function _(t){let{account:e,transaction:n}=t,i=await O(t),s=await A({account:e,eip712Transaction:i,chainId:n.chain.id}),a=(0,c.getRpcClient)(n);return{transactionHash:await (0,o.B)(a,s),chain:n.chain,client:n.client}}async function A(t){let{account:e,eip712Transaction:n,chainId:i}=t,o=I(n),c=await e.signTypedData({...o});return function(t){let{chainId:e,gas:n,nonce:i,to:o,from:c,value:u,maxFeePerGas:l,maxPriorityFeePerGas:x,customSignature:p,factoryDeps:g,paymaster:y,paymasterInput:b,gasPerPubdata:m,data:w}=t,B=[i?(0,f.nj)(i):"0x",x?(0,f.nj)(x):"0x",l?(0,f.nj)(l):"0x",n?(0,f.nj)(n):"0x",o??"0x",u?(0,f.nj)(u):"0x",w??"0x0",(0,f.nj)(e),(0,f.nj)(""),(0,f.nj)(""),(0,f.nj)(e),c??"0x",m?(0,f.nj)(m):(0,f.nj)(50000n),g??[],p??"0x",y&&b?[y,b]:[]];return(0,d.concatHex)(["0x71",function(t,e="hex"){let n=function t(e){return Array.isArray(e)?function(t){let e=t.reduce((t,e)=>t+e.length,0),n=h(e);return{length:e<=55?1+e:1+n+e,encode(i){for(let{encode:s}of(e<=55?i.pushByte(192+e):(i.pushByte(247+n),1===n?i.pushUint8(e):2===n?i.pushUint16(e):3===n?i.pushUint24(e):i.pushUint32(e)),t))s(i)}}}(e.map(e=>t(e))):function(t){let e="string"==typeof t?(0,a.aT)(t):t,n=h(e.length);return{length:1===e.length&&e[0]<128?1:e.length<=55?1+e.length:1+n+e.length,encode(t){1===e.length&&e[0]<128||(e.length<=55?t.pushByte(128+e.length):(t.pushByte(183+n),1===n?t.pushUint8(e.length):2===n?t.pushUint16(e.length):3===n?t.pushUint24(e.length):t.pushUint32(e.length))),t.pushBytes(e)}}}(e)}(t),i=(0,s.l)(new Uint8Array(n.length));return(n.encode(i),"hex"===e)?(0,r.My)(i.bytes):i.bytes}(B)])}({...n,chainId:i,customSignature:c})}async function O(t){let{account:e,transaction:n}=t,{gas:i,maxFeePerGas:s,maxPriorityFeePerGas:a,gasPerPubdata:r}=await j({transaction:n,from:(0,u.bv)(e.address)});return{...await (0,y.$)({transaction:{...n,gas:i,maxFeePerGas:s,maxPriorityFeePerGas:a},from:e.address}),...n.eip712,gasPerPubdata:r,from:e.address}}async function j(t){let{transaction:e,from:n}=t,[i,s,a,r]=await Promise.all([(0,p.r)(e.gas),(0,p.r)(e.maxFeePerGas),(0,p.r)(e.maxPriorityFeePerGas),(0,p.r)(e.eip712)]),h=r?.gasPerPubdata;if(void 0===i||void 0===s||void 0===a){let t=(0,c.getRpcClient)(e),r=await C({transaction:e,from:n}),o=await t({method:"zks_estimateFee",params:[x(r,f.nj)]});i=2n*l(o.gas_limit),s=2n*l(o.max_fee_per_gas),a=l(o.max_priority_fee_per_gas)||1n,(h=2n*l(o.gas_per_pubdata_limit))<50000n&&(h=50000n)}return{gas:i,maxFeePerGas:s,maxPriorityFeePerGas:a,gasPerPubdata:h}}async function C(t){let{transaction:e,from:n}=t,[i,s,r,h]=await Promise.all([(0,g.encode)(e),(0,p.r)(e.to),(0,p.r)(e.value),(0,p.r)(e.eip712)]),o=h?.gasPerPubdata;return{from:n,to:s,data:i,value:r,gasPerPubdata:o,eip712Meta:{...h,gasPerPubdata:o||50000n,factoryDeps:h?.factoryDeps?.map(t=>Array.from(a.aT(t)))},type:"0x71"}}},44771:(t,e,n)=>{n.r(e),n.d(e,{concatHex:()=>s});var i=n(46772);function s(t){return i.xW(...t)}},26542:(t,e,n)=>{n.d(e,{Ao:()=>s,Au:()=>i});let i=2n**16n-1n,s=2n**256n-1n}}]);