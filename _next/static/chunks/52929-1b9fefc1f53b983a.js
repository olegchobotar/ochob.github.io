(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[52929],{78346:e=>{e.exports={style:{fontFamily:"'Inter', 'Inter Fallback'",fontStyle:"normal"},className:"__className_d65c78"}},5020:(e,t,n)=>{"use strict";n.d(t,{PL:()=>r,RQ:()=>c,rB:()=>o});var a=n(84403);function r(e){return{onFetch:(t,n)=>{let r=t.options,o=t.fetchOptions?.meta?.fetchMore?.direction,c=t.state.data?.pages||[],l=t.state.data?.pageParams||[],u={pages:[],pageParams:[]},d=0,h=async()=>{let n=!1,h=e=>{Object.defineProperty(e,"signal",{enumerable:!0,get:()=>(t.signal.aborted?n=!0:t.signal.addEventListener("abort",()=>{n=!0}),t.signal)})},f=(0,a.ZM)(t.options,t.fetchOptions),m=async(e,r,i)=>{if(n)return Promise.reject();if(null==r&&e.pages.length)return Promise.resolve(e);let s={queryKey:t.queryKey,pageParam:r,direction:i?"backward":"forward",meta:t.options.meta};h(s);let o=await f(s),{maxPages:c}=t.options,l=i?a.ZZ:a.y9;return{pages:l(e.pages,o,c),pageParams:l(e.pageParams,r,c)}};if(o&&c.length){let e="backward"===o,t={pages:c,pageParams:l},n=(e?s:i)(r,t);u=await m(t,n,e)}else{let t=e??c.length;do{let e=0===d?l[0]??r.initialPageParam:i(r,u);if(d>0&&null==e)break;u=await m(u,e),d++}while(d<t)}return u};t.options.persister?t.fetchFn=()=>t.options.persister?.(h,{queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},n):t.fetchFn=h}}}function i(e,{pages:t,pageParams:n}){let a=t.length-1;return t.length>0?e.getNextPageParam(t[a],t,n[a],n):void 0}function s(e,{pages:t,pageParams:n}){return t.length>0?e.getPreviousPageParam?.(t[0],t,n[0],n):void 0}function o(e,t){return!!t&&null!=i(e,t)}function c(e,t){return!!t&&!!e.getPreviousPageParam&&null!=s(e,t)}},6124:(e,t,n)=>{"use strict";n.d(t,{z:()=>i});var a=n(24724),r=n(5020),i=class extends a.${constructor(e,t){super(e,t)}bindMethods(){super.bindMethods(),this.fetchNextPage=this.fetchNextPage.bind(this),this.fetchPreviousPage=this.fetchPreviousPage.bind(this)}setOptions(e,t){super.setOptions({...e,behavior:(0,r.PL)()},t)}getOptimisticResult(e){return e.behavior=(0,r.PL)(),super.getOptimisticResult(e)}fetchNextPage(e){return this.fetch({...e,meta:{fetchMore:{direction:"forward"}}})}fetchPreviousPage(e){return this.fetch({...e,meta:{fetchMore:{direction:"backward"}}})}createResult(e,t){let{state:n}=e,a=super.createResult(e,t),{isFetching:i,isRefetching:s,isError:o,isRefetchError:c}=a,l=n.fetchMeta?.fetchMore?.direction,u=o&&"forward"===l,d=i&&"forward"===l,h=o&&"backward"===l,f=i&&"backward"===l;return{...a,fetchNextPage:this.fetchNextPage,fetchPreviousPage:this.fetchPreviousPage,hasNextPage:(0,r.rB)(t,n.data),hasPreviousPage:(0,r.RQ)(t,n.data),isFetchNextPageError:u,isFetchingNextPage:d,isFetchPreviousPageError:h,isFetchingPreviousPage:f,isRefetchError:c&&!u&&!h,isRefetching:s&&!d&&!f}}}},74073:(e,t,n)=>{"use strict";n.d(t,{HydrationBoundary:()=>o});var a=n(12115);function r(e){return e}function i(e,t,n){if("object"!=typeof t||null===t)return;let a=e.getMutationCache(),i=e.getQueryCache(),s=n?.defaultOptions?.deserializeData??e.getDefaultOptions().hydrate?.deserializeData??r,o=t.mutations||[],c=t.queries||[];o.forEach(({state:t,...r})=>{a.build(e,{...e.getDefaultOptions().hydrate?.mutations,...n?.defaultOptions?.mutations,...r},t)}),c.forEach(({queryKey:t,state:a,queryHash:r,meta:o,promise:c})=>{let l=i.get(r),u=void 0===a.data?a.data:s(a.data);if(l){if(l.state.dataUpdatedAt<a.dataUpdatedAt){let{fetchStatus:e,...t}=a;l.setState({...t,data:u})}}else l=i.build(e,{...e.getDefaultOptions().hydrate?.queries,...n?.defaultOptions?.queries,queryKey:t,queryHash:r,meta:o},{...a,data:u,fetchStatus:"idle"});if(c){let e=Promise.resolve(c).then(s);l.fetch(void 0,{initialPromise:e})}})}var s=n(35906),o=e=>{let{children:t,options:n={},state:r,queryClient:o}=e,c=(0,s.useQueryClient)(o),[l,u]=a.useState(),d=a.useRef(n);return d.current=n,a.useMemo(()=>{if(r){if("object"!=typeof r)return;let e=c.getQueryCache(),t=r.queries||[],n=[],a=[];for(let r of t){let t=e.get(r.queryHash);if(t){let e=r.state.dataUpdatedAt>t.state.dataUpdatedAt,n=null==l?void 0:l.find(e=>e.queryHash===r.queryHash);e&&(!n||r.state.dataUpdatedAt>n.state.dataUpdatedAt)&&a.push(r)}else n.push(r)}n.length>0&&i(c,{queries:n},d.current),a.length>0&&u(e=>e?[...e,...a]:a)}},[c,l,r]),a.useEffect(()=>{l&&(i(c,{queries:l},d.current),u(void 0))},[c,l]),t}},12009:(e,t,n)=>{"use strict";n.d(t,{useInfiniteQuery:()=>i});var a=n(6124),r=n(81514);function i(e,t){return(0,r.t)(e,a.z,t)}},47583:(e,t,n)=>{"use strict";n.d(t,{useIsFetching:()=>s});var a=n(12115),r=n(15586),i=n(35906);function s(e,t){let n=(0,i.useQueryClient)(t),s=n.getQueryCache();return a.useSyncExternalStore(a.useCallback(e=>s.subscribe(r.j.batchCalls(e)),[s]),()=>n.isFetching(e),()=>n.isFetching(e))}},67885:(e,t,n)=>{"use strict";n.d(t,{useIsMutating:()=>o,useMutationState:()=>l});var a=n(12115),r=n(84403),i=n(15586),s=n(35906);function o(e,t){let n=(0,s.useQueryClient)(t);return l({filters:{...e,status:"pending"}},n).length}function c(e,t){return e.findAll(t.filters).map(e=>t.select?t.select(e):e.state)}function l(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=(0,s.useQueryClient)(t).getMutationCache(),o=a.useRef(e),l=a.useRef(null);return l.current||(l.current=c(n,e)),a.useEffect(()=>{o.current=e}),a.useSyncExternalStore(a.useCallback(e=>n.subscribe(()=>{let t=(0,r.BH)(l.current,c(n,o.current));l.current!==t&&(l.current=t,i.j.schedule(e))}),[n]),()=>l.current,()=>l.current)}},33097:(e,t,n)=>{"use strict";n.d(t,{useSuspenseInfiniteQuery:()=>s});var a=n(6124),r=n(81514),i=n(74760);function s(e,t){return(0,r.t)({...e,enabled:!0,suspense:!0,throwOnError:i.R3},a.z,t)}},97969:(e,t,n)=>{"use strict";n.d(t,{useSuspenseQueries:()=>i});var a=n(57695),r=n(74760);function i(e,t){return(0,a.useQueries)({...e,queries:e.queries.map(e=>({...e,suspense:!0,throwOnError:r.R3,enabled:!0,placeholderData:void 0}))},t)}},76273:(e,t,n)=>{"use strict";n.d(t,{useSuspenseQuery:()=>s});var a=n(24724),r=n(81514),i=n(74760);function s(e,t){return(0,r.t)({...e,enabled:!0,suspense:!0,throwOnError:i.R3,placeholderData:void 0},a.$,t)}},47131:(e,t,n)=>{"use strict";n.d(t,{t:()=>h,x:()=>f});var a=n(94648),r=n(9751),i=n(53047),s=n(55189);let o="0x107a274a",c=[{type:"uint256",name:"_listingId"}],l=[{type:"tuple",name:"listing",components:[{type:"uint256",name:"listingId"},{type:"uint256",name:"tokenId"},{type:"uint256",name:"quantity"},{type:"uint256",name:"pricePerToken"},{type:"uint128",name:"startTimestamp"},{type:"uint128",name:"endTimestamp"},{type:"address",name:"listingCreator"},{type:"address",name:"assetContract"},{type:"address",name:"currency"},{type:"uint8",name:"tokenType"},{type:"uint8",name:"status"},{type:"bool",name:"reserved"}]}];async function u(e){return(0,i.readContract)({contract:e.contract,method:[o,c,l],params:[e.listingId]})}var d=n(58721);async function h(e){let t=(0,r.getRpcClient)(e.contract),[n,i]=await Promise.all([u(e),(0,a.w)(t,{blockTag:"latest"})]);return(0,d.A)({contract:e.contract,latestBlock:i,rawListing:n})}function f(e){return(0,s.F)({availableSelectors:e,method:[o,c,l]})}},58721:(e,t,n)=>{"use strict";n.d(t,{r:()=>u,A:()=>l});var a=n(32068),r=n(52204),i=n(37188),s=n(524),o=n(11936);async function c(e){let[t,a]=await Promise.all([(0,s.J)(e),(0,o.x)(e)]);switch(!0){case t:{let{getNFT:t}=await Promise.resolve().then(n.bind(n,15358));return t(e)}case a:{let{getNFT:t}=await Promise.resolve().then(n.bind(n,61741));return t(e)}default:throw Error("Contract is neither ERC721 nor ERC1155.")}}async function l(e){let{latestBlock:t,rawListing:n}=e,s=function(e){switch(e.listingStatus){case 1:if(e.startTimestamp>e.blockTimeStamp)return"CREATED";if(e.endTimestamp<e.blockTimeStamp)return"EXPIRED";return"ACTIVE";case 2:return"COMPLETED";case 3:return"CANCELLED";default:throw Error(`Invalid listing status: "${e.listingStatus}"`)}}({listingStatus:n.status,blockTimeStamp:t.timestamp,startTimestamp:n.startTimestamp,endTimestamp:n.endTimestamp}),[o,l]=await Promise.all([(0,i.getCurrencyMetadata)({contract:(0,a.getContract)({...e.contract,address:n.currency})}),c({...e,contract:(0,a.getContract)({...e.contract,address:n.assetContract}),tokenId:n.tokenId})]);return{id:n.listingId,creatorAddress:n.listingCreator,assetContractAddress:n.assetContract,tokenId:n.tokenId,quantity:n.quantity,currencyContractAddress:n.currency,currencyValuePerToken:{...o,value:n.pricePerToken,displayValue:(0,r.ow)(n.pricePerToken,o.decimals)},pricePerToken:n.pricePerToken,asset:l,startTimeInSeconds:n.startTimestamp,endTimeInSeconds:n.endTimestamp,isReservedListing:n.reserved,status:s,type:"direct-listing"}}async function u(e){let t=(0,a.getContract)({...e.contract,address:e.listing.assetContractAddress}),[r,i]=await Promise.all([(0,s.J)({contract:t}),(0,o.x)({contract:t})]);if(r){let[{isApprovedForAll:a},{getApproved:r},{ownerOf:i}]=await Promise.all([n.e(46956).then(n.bind(n,46956)),n.e(83580).then(n.bind(n,83580)),n.e(34669).then(n.bind(n,34669))]),[s,o,c]=await Promise.all([a({contract:t,owner:e.listing.creatorAddress,operator:e.contract.address}),r({contract:t,tokenId:e.listing.tokenId}).catch(()=>""),i({contract:t,tokenId:e.listing.tokenId})]);return s||o===e.contract.address?c!==e.listing.creatorAddress?{valid:!1,reason:"Listing creator no longer owns this token."}:{valid:!0}:{valid:!1,reason:"Asset not approved for marketplace."}}if(i){let[{isApprovedForAll:a},{balanceOf:r}]=await Promise.all([n.e(45207).then(n.bind(n,45207)),n.e(55163).then(n.bind(n,55163))]),[i,s]=await Promise.all([a({contract:t,owner:e.listing.creatorAddress,operator:e.contract.address}),r({contract:t,owner:e.listing.creatorAddress,tokenId:e.listing.tokenId})]);return i?s<(e.quantity||e.listing.quantity)?{valid:!1,reason:"Seller does not have enough balance of token to fulfill order."}:{valid:!0}:{valid:!1,reason:"Asset not approved for marketplace."}}return{valid:!1,reason:"AssetContract must implement ERC 1155 or ERC 721."}}},80415:(e,t,n)=>{"use strict";n.d(t,{useIsAutoConnecting:()=>i});var a=n(12115),r=n(17940);function i(){let e=(0,r.S)("useIsAutoConnecting").isAutoConnecting;return(0,a.useSyncExternalStore)(e.subscribe,e.getValue,e.getValue)}},16059:(e,t,n)=>{"use strict";n.d(t,{ThirdwebProvider:()=>O});var a=n(95155),r=n(12115),i=n(35408),s=n(40451),o=n(84403),c=n(47702),l=n(15586),u=n(99323),d=class extends u.Q{constructor(e={}){super(),this.config=e,this.#e=new Map}#e;build(e,t,n){let a=t.queryKey,r=t.queryHash??(0,o.F$)(a,t),i=this.get(r);return i||(i=new c.X({cache:this,queryKey:a,queryHash:r,options:e.defaultQueryOptions(t),state:n,defaultOptions:e.getQueryDefaults(a)}),this.add(i)),i}add(e){this.#e.has(e.queryHash)||(this.#e.set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){let t=this.#e.get(e.queryHash);t&&(e.destroy(),t===e&&this.#e.delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){l.j.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return this.#e.get(e)}getAll(){return[...this.#e.values()]}find(e){let t={exact:!0,...e};return this.getAll().find(e=>(0,o.MK)(t,e))}findAll(e={}){let t=this.getAll();return Object.keys(e).length>0?t.filter(t=>(0,o.MK)(e,t)):t}notify(e){l.j.batch(()=>{this.listeners.forEach(t=>{t(e)})})}onFocus(){l.j.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){l.j.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},h=n(1049),f=class extends u.Q{constructor(e={}){super(),this.config=e,this.#t=new Set,this.#n=new Map,this.#a=0}#t;#n;#a;build(e,t,n){let a=new h.s({mutationCache:this,mutationId:++this.#a,options:e.defaultMutationOptions(t),state:n});return this.add(a),a}add(e){this.#t.add(e);let t=m(e);if("string"==typeof t){let n=this.#n.get(t);n?n.push(e):this.#n.set(t,[e])}this.notify({type:"added",mutation:e})}remove(e){if(this.#t.delete(e)){let t=m(e);if("string"==typeof t){let n=this.#n.get(t);if(n){if(n.length>1){let t=n.indexOf(e);-1!==t&&n.splice(t,1)}else n[0]===e&&this.#n.delete(t)}}}this.notify({type:"removed",mutation:e})}canRun(e){let t=m(e);if("string"!=typeof t)return!0;{let n=this.#n.get(t),a=n?.find(e=>"pending"===e.state.status);return!a||a===e}}runNext(e){let t=m(e);if("string"!=typeof t)return Promise.resolve();{let n=this.#n.get(t)?.find(t=>t!==e&&t.state.isPaused);return n?.continue()??Promise.resolve()}}clear(){l.j.batch(()=>{this.#t.forEach(e=>{this.notify({type:"removed",mutation:e})}),this.#t.clear(),this.#n.clear()})}getAll(){return Array.from(this.#t)}find(e){let t={exact:!0,...e};return this.getAll().find(e=>(0,o.nJ)(t,e))}findAll(e={}){return this.getAll().filter(t=>(0,o.nJ)(e,t))}notify(e){l.j.batch(()=>{this.listeners.forEach(t=>{t(e)})})}resumePausedMutations(){let e=this.getAll().filter(e=>e.state.isPaused);return l.j.batch(()=>Promise.all(e.map(e=>e.continue().catch(o.lQ))))}};function m(e){return e.options.scope?.id}var y=n(34017),p=n(38248),v=n(5020),g=class{#r;#i;#s;#o;#c;#l;#u;#d;constructor(e={}){this.#r=e.queryCache||new d,this.#i=e.mutationCache||new f,this.#s=e.defaultOptions||{},this.#o=new Map,this.#c=new Map,this.#l=0}mount(){this.#l++,1===this.#l&&(this.#u=y.m.subscribe(async e=>{e&&(await this.resumePausedMutations(),this.#r.onFocus())}),this.#d=p.t.subscribe(async e=>{e&&(await this.resumePausedMutations(),this.#r.onOnline())}))}unmount(){this.#l--,0===this.#l&&(this.#u?.(),this.#u=void 0,this.#d?.(),this.#d=void 0)}isFetching(e){return this.#r.findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return this.#i.findAll({...e,status:"pending"}).length}getQueryData(e){let t=this.defaultQueryOptions({queryKey:e});return this.#r.get(t.queryHash)?.state.data}ensureQueryData(e){let t=this.defaultQueryOptions(e),n=this.#r.build(this,t),a=n.state.data;return void 0===a?this.fetchQuery(e):(e.revalidateIfStale&&n.isStaleByTime((0,o.d2)(t.staleTime,n))&&this.prefetchQuery(t),Promise.resolve(a))}getQueriesData(e){return this.#r.findAll(e).map(({queryKey:e,state:t})=>[e,t.data])}setQueryData(e,t,n){let a=this.defaultQueryOptions({queryKey:e}),r=this.#r.get(a.queryHash),i=r?.state.data,s=(0,o.Zw)(t,i);if(void 0!==s)return this.#r.build(this,a).setData(s,{...n,manual:!0})}setQueriesData(e,t,n){return l.j.batch(()=>this.#r.findAll(e).map(({queryKey:e})=>[e,this.setQueryData(e,t,n)]))}getQueryState(e){let t=this.defaultQueryOptions({queryKey:e});return this.#r.get(t.queryHash)?.state}removeQueries(e){let t=this.#r;l.j.batch(()=>{t.findAll(e).forEach(e=>{t.remove(e)})})}resetQueries(e,t){let n=this.#r,a={type:"active",...e};return l.j.batch(()=>(n.findAll(e).forEach(e=>{e.reset()}),this.refetchQueries(a,t)))}cancelQueries(e,t={}){let n={revert:!0,...t};return Promise.all(l.j.batch(()=>this.#r.findAll(e).map(e=>e.cancel(n)))).then(o.lQ).catch(o.lQ)}invalidateQueries(e,t={}){return l.j.batch(()=>{if(this.#r.findAll(e).forEach(e=>{e.invalidate()}),e?.refetchType==="none")return Promise.resolve();let n={...e,type:e?.refetchType??e?.type??"active"};return this.refetchQueries(n,t)})}refetchQueries(e,t={}){let n={...t,cancelRefetch:t.cancelRefetch??!0};return Promise.all(l.j.batch(()=>this.#r.findAll(e).filter(e=>!e.isDisabled()).map(e=>{let t=e.fetch(void 0,n);return n.throwOnError||(t=t.catch(o.lQ)),"paused"===e.state.fetchStatus?Promise.resolve():t}))).then(o.lQ)}fetchQuery(e){let t=this.defaultQueryOptions(e);void 0===t.retry&&(t.retry=!1);let n=this.#r.build(this,t);return n.isStaleByTime((0,o.d2)(t.staleTime,n))?n.fetch(t):Promise.resolve(n.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(o.lQ).catch(o.lQ)}fetchInfiniteQuery(e){return e.behavior=(0,v.PL)(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(o.lQ).catch(o.lQ)}ensureInfiniteQueryData(e){return e.behavior=(0,v.PL)(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return p.t.isOnline()?this.#i.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#r}getMutationCache(){return this.#i}getDefaultOptions(){return this.#s}setDefaultOptions(e){this.#s=e}setQueryDefaults(e,t){this.#o.set((0,o.EN)(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){let t=[...this.#o.values()],n={};return t.forEach(t=>{(0,o.Cp)(e,t.queryKey)&&Object.assign(n,t.defaultOptions)}),n}setMutationDefaults(e,t){this.#c.set((0,o.EN)(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){let t=[...this.#c.values()],n={};return t.forEach(t=>{(0,o.Cp)(e,t.mutationKey)&&(n={...n,...t.defaultOptions})}),n}defaultQueryOptions(e){if(e._defaulted)return e;let t={...this.#s.queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=(0,o.F$)(t.queryKey,t)),void 0===t.refetchOnReconnect&&(t.refetchOnReconnect="always"!==t.networkMode),void 0===t.throwOnError&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===o.hT&&(t.enabled=!1),t}defaultMutationOptions(e){return e?._defaulted?e:{...this.#s.mutations,...e?.mutationKey&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){this.#r.clear(),this.#i.clear()}},w=n(35906),b=n(70539),C=n(81586);function P(e,t){return!function e(t,n){if(t===n)return!0;if(t&&n&&"object"==typeof t&&"object"==typeof n){let a,r;if(t.constructor!==n.constructor)return!1;if(Array.isArray(t)&&Array.isArray(n)){if((a=t.length)!==n.length)return!1;for(r=a;0!=r--;)if(!e(t[r],n[r]))return!1;return!0}if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();let i=Object.keys(t);if((a=i.length)!==Object.keys(n).length)return!1;for(r=a;0!=r--;)if(!Object.prototype.hasOwnProperty.call(n,i[r]))return!1;for(r=a;0!=r--;){let a=i[r];if(a&&!e(t[a],n[a]))return!1}return!0}return t!=t&&n!=n}(e,t)?(0,o.BH)(e,t):e}var q=n(91589),x=n(17940),A=n(8390);function T(e){let[t,n]=(0,r.useState)(null),[i]=(0,r.useState)(()=>new g({defaultOptions:{mutations:{onSettled:(e,t,n)=>{(0,C.C)(n,["__contract"])&&(0,C.C)(n.__contract,["address","chain"])&&"string"==typeof n.__contract.address&&(0,C.C)(e,["transactionHash"])&&(0,C.C)(n,["client","chain"])&&(0,b.L)({transactionHash:e.transactionHash,client:n.client,chain:n.chain}).catch(e=>{console.error("[Transaction Error]",e)}).then(()=>{var e,t,a;return Promise.all([i.invalidateQueries({queryKey:["readContract",null===(e=n.__contract)||void 0===e?void 0:e.chain.id,null===(t=n.__contract)||void 0===t?void 0:t.address]}),(0,A.V)(i,null===(a=n.__contract)||void 0===a?void 0:a.chain.id)])})}},queries:{staleTime:6e4,structuralSharing:P}}}));return(0,a.jsx)(x.d.Provider,{value:e.manager,children:(0,a.jsxs)(w.QueryClientProvider,{client:i,children:[(0,a.jsx)(q.SetRootElementContext.Provider,{value:n,children:e.children}),t]})})}function O(e){let t=(0,r.useMemo)(()=>e.connectionManager||(0,s.oJ)(i.n),[e.connectionManager]);return(0,a.jsx)(T,{manager:t,children:e.children})}},29770:(e,t,n)=>{"use strict";n.d(t,{ConnectEmbed:()=>x,N:()=>T});var a=n(95155),r=n(12115),i=n(88593),s=n(7853),o=n(29524),c=n(98384),l=n(97727),u=n(69729),d=n(80415),h=n(17940),f=n(32954),m=n(25133),y=n(94431),p=n(59789),v=n(10773),g=n(55970),w=n(89703),b=n(2992),C=n(61294),P=n(76457),q=n(22233);function x(e){var t,n,o;let d=(0,u.useActiveWallet)(),g=(0,l.useActiveAccount)(),w=(0,c.W)(d,g,e.auth),b=!g||w.requiresAuth&&!w.isLoggedIn,P=(0,h.useConnectionManager)();(0,r.useEffect)(()=>{e.chain&&P.defineChains([e.chain])},[e.chain,P]),(0,r.useEffect)(()=>{e.chains&&P.defineChains(e.chains)},[e.chains,P]);let q=(0,r.useMemo)(()=>e.wallets||(0,i.E)({appMetadata:e.appMetadata,chains:e.chains}),[e.wallets,e.appMetadata,e.chains]),x=e.locale||"en_US",O=(0,C.m)(x);(0,y.E)({wallets:q,client:e.client});let k=(0,r.useMemo)(()=>(0,m.c)()&&1!==q.length&&e.modalSize||"compact",[q.length,e.modalSize]),E=(0,r.useMemo)(()=>({privacyPolicyUrl:e.privacyPolicyUrl,showThirdwebBranding:!1!==e.showThirdwebBranding,termsOfServiceUrl:e.termsOfServiceUrl,title:void 0,titleIconUrl:void 0,requireApproval:e.requireApproval}),[e.privacyPolicyUrl,e.showThirdwebBranding,e.termsOfServiceUrl,e.requireApproval]),S=(null===(t=e.accountAbstraction)||void 0===t?void 0:t.chain)||e.chain||(null===(n=e.chains)||void 0===n?void 0:n[0]),I=!1!==e.autoConnect&&(0,a.jsx)(v.AutoConnect,{chain:S,appMetadata:e.appMetadata,client:e.client,wallets:q,accountAbstraction:e.accountAbstraction,timeout:"boolean"==typeof e.autoConnect?void 0:null===(o=e.autoConnect)||void 0===o?void 0:o.timeout,onConnect:e.onConnect});return b?O.data?(0,a.jsxs)(f.WalletUIStatesProvider,{theme:e.theme,isOpen:!0,children:[(0,a.jsx)(A,{auth:e.auth,accountAbstraction:e.accountAbstraction,chain:S,chains:e.chains,client:e.client,connectLocale:O.data,size:k,meta:E,header:e.header,localeId:e.locale||"en_US",onConnect:e.onConnect,recommendedWallets:e.recommendedWallets,showAllWallets:e.showAllWallets,walletConnect:e.walletConnect,wallets:q,className:e.className,modalSize:k,style:e.style,welcomeScreen:e.welcomeScreen}),I]}):(0,a.jsxs)(a.Fragment,{children:[I,(0,a.jsx)(s.CustomThemeProvider,{theme:e.theme,children:(0,a.jsx)(T,{modalSize:k,children:(0,a.jsx)(p.x,{})})})]}):(0,a.jsx)("div",{children:I})}let A=e=>{let t=(0,q.useSetupScreen)({size:e.size,welcomeScreen:void 0,wallets:e.wallets}),{setScreen:n,initialScreen:i,screen:s}=t,o=(0,u.useActiveWallet)(),h=(0,l.useActiveAccount)(),f=(0,c.W)(o,h,e.auth),y=(0,d.useIsAutoConnecting)(),v=null;(0,r.useEffect)(()=>{f.requiresAuth&&!f.isLoggedIn&&h&&s===i&&n(b.Qq.signIn)},[f,n,h,s,i]);let w=(0,m.c)()&&e.modalSize||"compact";return v=y?(0,a.jsx)(p.x,{}):(0,a.jsx)(P.ConnectModalContent,{shouldSetActive:!0,screenSetup:t,isOpen:!0,onClose:()=>{n(i)},setModalVisibility:()=>{},accountAbstraction:e.accountAbstraction,auth:e.auth,chain:e.chain,chains:e.chains,client:e.client,connectLocale:e.connectLocale,meta:{...e.meta,title:"object"==typeof e.header?e.header.title:void 0,titleIconUrl:"object"==typeof e.header?e.header.titleIcon:void 0},size:e.size,welcomeScreen:e.welcomeScreen,hideHeader:!e.header,onConnect:e.onConnect,recommendedWallets:e.recommendedWallets,showAllWallets:e.showAllWallets,walletConnect:e.walletConnect,wallets:e.wallets,modalHeader:void 0,walletIdsToHide:void 0}),(0,a.jsx)(T,{modalSize:w,className:e.className,style:e.style,children:"wide"===w?v:(0,a.jsxs)(g.X,{children:[" ",v," "]})})},T=(0,w.jx)(e=>{let{modalSize:t}=e,n=(0,s.useCustomTheme)();return{color:n.colors.primaryText,background:n.colors.modalBg,height:"compact"===t?"auto":b.gr,width:"compact"===t?b.FE:b.HC,boxSizing:"border-box",position:"relative",lineHeight:"normal",borderRadius:o.r8.xl,border:"1px solid ".concat(n.colors.borderColor),overflow:"hidden",fontFamily:n.fontFamily,"& *::selection":{backgroundColor:n.colors.selectedTextBg,color:n.colors.selectedTextColor},"& *":{boxSizing:"border-box"}}})},53216:(e,t,n)=>{"use strict";n.d(t,{PayEmbed:()=>f});var a=n(95155),r=n(12115),i=n(7853),s=n(17940),o=n(29770),c=n(61294),l=n(98740),u=n(46370),d=n(55970),h=n(44925);function f(e){var t,n,f;let m=(0,c.m)(e.locale||"en_US"),[y,p]=(0,r.useState)("buy"),v=e.theme||"dark",g=(0,s.useConnectionManager)();(0,r.useEffect)(()=>{var t,n;(null===(t=e.connectOptions)||void 0===t?void 0:t.chain)&&g.defineChains([null===(n=e.connectOptions)||void 0===n?void 0:n.chain])},[null===(t=e.connectOptions)||void 0===t?void 0:t.chain,g]),(0,r.useEffect)(()=>{var t,n;(null===(t=e.connectOptions)||void 0===t?void 0:t.chains)&&g.defineChains(null===(n=e.connectOptions)||void 0===n?void 0:n.chains)},[null===(n=e.connectOptions)||void 0===n?void 0:n.chains,g]);let w=null,b=e.payOptions&&"metadata"in e.payOptions?e.payOptions.metadata:null;return w=m.data?(0,a.jsxs)(a.Fragment,{children:["buy"===y&&(0,a.jsx)(l.default,{title:(null==b?void 0:b.name)||"Buy",isEmbed:!0,supportedTokens:e.supportedTokens,theme:v,client:e.client,connectLocale:m.data,hiddenWallets:e.hiddenWallets,payOptions:e.payOptions||{mode:"fund_wallet"},onDone:()=>{var t;(null===(t=e.payOptions)||void 0===t?void 0:t.mode)==="transaction"&&p("execute-tx")},connectOptions:e.connectOptions,onBack:void 0}),"execute-tx"===y&&(null===(f=e.payOptions)||void 0===f?void 0:f.mode)==="transaction"&&e.payOptions.transaction&&(0,a.jsx)(u.h,{tx:e.payOptions.transaction,closeModal:()=>{p("buy")},onBack:()=>{p("buy")},onTxSent:t=>{var n,a;null===(a=e.payOptions)||void 0===a||null===(n=a.onPurchaseSuccess)||void 0===n||n.call(a,{type:"transaction",chainId:t.chain.id,transactionHash:t.transactionHash})}})]}):(0,a.jsx)("div",{style:{minHeight:"350px",display:"flex",justifyContent:"center",alignItems:"center"},children:(0,a.jsx)(h.Spinner,{size:"xl",color:"secondaryText"})}),(0,a.jsx)(i.CustomThemeProvider,{theme:v,children:(0,a.jsx)(o.N,{modalSize:"compact",style:e.style,className:e.className,children:(0,a.jsx)(d.X,{children:w})})})}},87173:(e,t,n)=>{"use strict";n.d(t,{SiteEmbed:()=>u});var a=n(95155),r=n(93233),i=n(16108),s=n(35408),o=n(71490),c=n(92767),l=n(69729);function u(e){let{src:t,client:n,ecosystem:u,...d}=e;if(!n.clientId)throw Error("The SiteEmbed client must have a clientId");let h=(0,l.useActiveWallet)(),f=null==h?void 0:h.id,{data:{authProvider:m,authCookie:y}={}}=(0,r.useQuery)({queryKey:["site-embed",f,t,n.clientId,u],enabled:h&&((0,o.Y)(h)||"inApp"===f),queryFn:async()=>{let e=new c.t({storage:s.n,clientId:n.clientId,ecosystem:u});return{authProvider:await (0,i.u2)(s.n),authCookie:await e.getAuthCookie()}}}),p=new URL(t);return f&&p.searchParams.set("walletId",f),m&&p.searchParams.set("authProvider",m),y&&p.searchParams.set("authCookie",y),(0,a.jsx)("iframe",{src:encodeURI(p.toString()),width:"100%",height:"100%",allowFullScreen:!0,...d})}},99604:(e,t,n)=>{"use strict";n.d(t,{SiteLink:()=>u});var a=n(95155),r=n(93233),i=n(16108),s=n(35408),o=n(71490),c=n(92767),l=n(69729);function u(e){let{href:t,client:n,ecosystem:u,children:d,...h}=e;if(!n.clientId)throw Error("The SiteLink client must have a clientId");let f=(0,l.useActiveWallet)(),m=null==f?void 0:f.id,{data:{authProvider:y,authCookie:p}={}}=(0,r.useQuery)({queryKey:["site-link",m,t,n.clientId,u],enabled:f&&((0,o.Y)(f)||"inApp"===m),queryFn:async()=>{let e=new c.t({storage:s.n,clientId:n.clientId,ecosystem:u});return{authProvider:await (0,i.u2)(s.n),authCookie:await e.getAuthCookie()}}}),v=new URL(t);return m&&v.searchParams.set("walletId",m),y&&v.searchParams.set("authProvider",y),p&&v.searchParams.set("authCookie",p),(0,a.jsx)("a",{href:encodeURI(v.toString()),...h,children:d})}},95906:(e,t,n)=>{"use strict";n.d(t,{NFTDescription:()=>c});var a=n(95155),r=n(93233),i=n(3713),s=n(59525),o=n(35397);function c(e){let{loadingComponent:t,fallbackComponent:n,queryOptions:o,descriptionResolver:c,...u}=e,{contract:d,tokenId:h}=(0,s.b)(),f=(0,r.useQuery)({queryKey:["_internal_nft_description_",d.chain.id,d.address,h.toString(),{resolver:"string"==typeof c?c:"function"==typeof c?(0,i.A)(c):void 0}],queryFn:async()=>l({descriptionResolver:c,contract:d,tokenId:h}),...o});return f.isLoading?t||null:f.data?(0,a.jsx)("span",{...u,children:f.data}):n||null}async function l(e){let{descriptionResolver:t,contract:n,tokenId:a}=e;if("string"==typeof t)return t;if("function"==typeof t)return t();let r=await (0,o.d)({contract:n,tokenId:a}).catch(()=>void 0);if(!r)throw Error("Failed to resolve NFT info");if("string"!=typeof r.metadata.description)throw Error("Failed to resolve NFT description");return r.metadata.description}},93948:(e,t,n)=>{"use strict";n.d(t,{NFTMedia:()=>l});var a=n(95155),r=n(93233),i=n(3713),s=n(15288),o=n(59525),c=n(35397);function l(e){let{loadingComponent:t,fallbackComponent:n,queryOptions:c,mediaResolver:l,...d}=e,{contract:h,tokenId:f}=(0,o.b)(),m=(0,r.useQuery)({queryKey:function(e){let{chainId:t,tokenId:n,mediaResolver:a,contractAddress:r}=e;return["_internal_nft_media_",t,r,n.toString(),{resolver:"object"==typeof a?a:"function"==typeof a?(0,i.A)(a):void 0}]}({contractAddress:h.address,chainId:h.chain.id,tokenId:f,mediaResolver:l}),queryFn:async()=>u({mediaResolver:l,contract:h,tokenId:f}),...c});return m.isLoading?t||null:m.data?(0,a.jsx)(s.MediaRenderer,{client:h.client,src:m.data.src,poster:m.data.poster,...d}):n||null}async function u(e){let{mediaResolver:t,contract:n,tokenId:a}=e;if("object"==typeof t)return t;if("function"==typeof t)return t();let r=await (0,c.d)({contract:n,tokenId:a}).catch(()=>void 0);if(!r)throw Error("Failed to resolve NFT info");let i=r.metadata.animation_url,s=r.metadata.image||r.metadata.image_url;if(i)return{src:i,poster:s||void 0};if(s)return{src:s,poster:void 0};throw Error("Failed to resolve NFT media")}},90955:(e,t,n)=>{"use strict";n.d(t,{NFTName:()=>c});var a=n(95155),r=n(93233),i=n(3713),s=n(59525),o=n(35397);function c(e){let{loadingComponent:t,fallbackComponent:n,queryOptions:o,nameResolver:c,...u}=e,{contract:d,tokenId:h}=(0,s.b)(),f=(0,r.useQuery)({queryKey:function(e){let{chainId:t,tokenId:n,nameResolver:a,contractAddress:r}=e;return["_internal_nft_name_",t,r,n.toString(),{resolver:"string"==typeof a?a:"function"==typeof a?(0,i.A)(a):void 0}]}({contractAddress:d.address,chainId:d.chain.id,tokenId:h,nameResolver:c}),queryFn:async()=>l({nameResolver:c,contract:d,tokenId:h}),...o});return f.isLoading?t||null:f.data?(0,a.jsx)("span",{...u,children:f.data}):n||null}async function l(e){let{nameResolver:t,contract:n,tokenId:a}=e;if("string"==typeof t)return t;if("function"==typeof t)return t();let r=await (0,o.d)({contract:n,tokenId:a}).catch(()=>void 0);if(!r)throw Error("Failed to resolve NFT info");if("string"!=typeof r.metadata.name)throw Error("Failed to resolve NFT name");return r.metadata.name}},59525:(e,t,n)=>{"use strict";n.d(t,{NFTProvider:()=>o,b:()=>s});var a=n(95155),r=n(12115);let i=(0,r.createContext)(void 0);function s(){let e=(0,r.useContext)(i);if(!e)throw Error("NFTProviderContext not found. Make sure you are using NFTMedia, NFTDescription, etc. inside a <NFTProvider /> component");return e}function o(e){return(0,a.jsx)(i.Provider,{value:e,children:e.children})}},35397:(e,t,n)=>{"use strict";n.d(t,{d:()=>s});var a=n(15358),r=n(61741),i=n(71679);async function s(e){return(0,i.n)(async()=>await Promise.allSettled([(0,a.getNFT)(e),(0,r.getNFT)(e)]).then(([e,t])=>{if("fulfilled"===e.status&&e.value.tokenURI)return e.value;if("fulfilled"===t.status&&t.value.tokenURI)return t.value;throw Error("Failed to load NFT metadata")}),{cacheKey:`nft_info:${e.contract.chain.id}:${e.contract.address}:${e.tokenId.toString()}`,cacheTime:9e5})}},6130:(e,t,n)=>{"use strict";n.d(t,{TokenIcon:()=>h});var a=n(95155),r=n(93233),i=n(62251),s=n(92223),o=n(32068),c=n(22613),l=n(3713),u=n(50675),d=n(97094);function h(e){let{iconResolver:t,loadingComponent:n,fallbackComponent:h,queryOptions:f,...m}=e,{address:y,client:p,chain:v}=(0,d.W)(),g=(0,r.useQuery)({queryKey:["_internal_token_icon_",v.id,y,{resolver:"string"==typeof t?t:"function"==typeof t?(0,l.A)(t):void 0}],queryFn:async()=>{if("string"==typeof t)return t;if("function"==typeof t)return t();if(y.toLowerCase()===s.DG.toLowerCase()){let e=await (0,i.getChainMetadata)(v).then(e=>{var t;return null===(t=e.icon)||void 0===t?void 0:t.url});if(!e)throw Error("Failed to resolve icon for native token");return(0,u.uo)({uri:e,client:p})}let e=await (0,c.getContractMetadata)({contract:(0,o.getContract)({address:y,chain:v,client:p})});if(!e.image||"string"!=typeof e.image)throw Error("Failed to resolve token icon from contract metadata");return(0,u.uo)({uri:e.image,client:p})},...f});return g.isLoading?n||null:g.data?(0,a.jsx)("img",{src:g.data,...m,alt:m.alt}):h||null}},7468:(e,t,n)=>{"use strict";n.d(t,{TokenName:()=>h});var a=n(95155),r=n(93233),i=n(62251),s=n(92223),o=n(32068),c=n(22613),l=n(59104),u=n(3713),d=n(97094);function h(e){let{nameResolver:t,formatFn:n,loadingComponent:i,fallbackComponent:s,queryOptions:o,...c}=e,{address:l,client:h,chain:m}=(0,d.W)(),y=(0,r.useQuery)({queryKey:function(e){let{chainId:t,address:n,nameResolver:a}=e;return["_internal_token_name_",t,n,{resolver:"string"==typeof a?a:"function"==typeof a?(0,u.A)(a):void 0}]}({chainId:m.id,nameResolver:t,address:l}),queryFn:async()=>f({address:l,chain:m,client:h,nameResolver:t}),...o});return y.isLoading?i||null:y.data?n&&"function"==typeof n?(0,a.jsx)("span",{...c,children:n(y.data)}):(0,a.jsx)("span",{...c,children:y.data}):s||null}async function f(e){let{nameResolver:t,address:n,client:a,chain:r}=e;if("string"==typeof t)return t;if("function"==typeof t)return t();if(n.toLowerCase()===s.DG.toLowerCase())return(0,i.getChainMetadata)(r).then(e=>e.nativeCurrency.name);let u=(0,o.getContract)({address:n,client:a,chain:r}),[d,h]=await Promise.all([(0,l.U)({contract:u}).catch(()=>void 0),(0,c.getContractMetadata)({contract:u}).catch(()=>void 0)]);if("string"==typeof d)return d;if("string"==typeof(null==h?void 0:h.name))return h.name;throw Error("Failed to resolve name from both name() and contract metadata")}},97094:(e,t,n)=>{"use strict";n.d(t,{TokenProvider:()=>s,W:()=>o});var a=n(95155),r=n(12115);let i=(0,r.createContext)(void 0);function s(e){return(0,a.jsx)(i.Provider,{value:e,children:e.children})}function o(){let e=(0,r.useContext)(i);if(!e)throw Error("TokenProviderContext not found. Make sure you are using TokenName, TokenIcon, TokenSymbol etc. inside a <TokenProvider /> component");return e}},26855:(e,t,n)=>{"use strict";n.d(t,{TokenSymbol:()=>h});var a=n(95155),r=n(93233),i=n(62251),s=n(92223),o=n(32068),c=n(22613),l=n(64570),u=n(3713),d=n(97094);function h(e){let{symbolResolver:t,formatFn:n,loadingComponent:i,fallbackComponent:s,queryOptions:o,...c}=e,{address:l,client:h,chain:m}=(0,d.W)(),y=(0,r.useQuery)({queryKey:function(e){let{chainId:t,address:n,symbolResolver:a}=e;return["_internal_token_symbol_",t,n,{resolver:"string"==typeof a?a:"function"==typeof a?(0,u.A)(a):void 0}]}({chainId:m.id,address:l,symbolResolver:t}),queryFn:async()=>f({symbolResolver:t,address:l,chain:m,client:h}),...o});return y.isLoading?i||null:y.data?n&&"function"==typeof n?(0,a.jsx)("span",{...c,children:n(y.data)}):(0,a.jsx)("span",{...c,children:y.data}):s||null}async function f(e){let{symbolResolver:t,address:n,client:a,chain:r}=e;if("string"==typeof t)return t;if("function"==typeof t)return t();if(n.toLowerCase()===s.DG.toLowerCase())return(0,i.getChainMetadata)(r).then(e=>e.nativeCurrency.symbol);let u=(0,o.getContract)({address:n,client:a,chain:r}),[d,h]=await Promise.all([(0,l.H)({contract:u}).catch(()=>void 0),(0,c.getContractMetadata)({contract:u}).catch(()=>void 0)]);if("string"==typeof d)return d;if("string"==typeof(null==h?void 0:h.symbol))return h.symbol;throw Error("Failed to resolve symbol from both symbol() and contract metadata")}},80616:(e,t,n)=>{"use strict";n.d(t,{WalletIcon:()=>o});var a=n(95155),r=n(93233),i=n(74627),s=n(10568);function o(e){let{loadingComponent:t,fallbackComponent:n,queryOptions:i,...o}=e,l=function(e){let{id:t}=(0,s.u)();return(0,r.useQuery)({queryKey:["walletIcon",t],queryFn:async()=>c({id:t}),...e.queryOptions})}({queryOptions:i});return l.isLoading?t||null:l.data?(0,a.jsx)("img",{src:l.data,...o,alt:o.alt}):n||null}async function c(e){return(0,i.u)(e.id,!0)}},21538:(e,t,n)=>{"use strict";n.d(t,{WalletName:()=>c});var a=n(95155),r=n(93233),i=n(3713),s=n(74627),o=n(10568);function c(e){let{loadingComponent:t,fallbackComponent:n,queryOptions:s,formatFn:c,...u}=e,d=function(e){var t;let{id:n}=(0,o.u)();return(0,r.useQuery)({queryKey:"function"==typeof(t={id:n,formatFn:e.formatFn}).formatFn?["walletName",t.id,{resolver:(0,i.A)(t.formatFn)}]:["walletName",t.id],queryFn:async()=>l({id:n,formatFn:e.formatFn}),...e.queryOptions})}({queryOptions:s,formatFn:c});return d.isLoading?t||null:d.data?(0,a.jsx)("span",{...u,children:d.data}):n||null}async function l(e){let t=await (0,s.u)(e.id);return"function"==typeof e.formatFn?e.formatFn(t.name):t.name}},10568:(e,t,n)=>{"use strict";n.d(t,{WalletProvider:()=>s,u:()=>o});var a=n(95155),r=n(12115);let i=(0,r.createContext)(void 0);function s(e){return(0,a.jsx)(i.Provider,{value:e,children:e.children})}function o(){let e=(0,r.useContext)(i);if(!e)throw Error("WalletProviderContext not found. Make sure you are using WalletIcon, WalletName, etc. inside a <WalletProvider /> component");return e}},23941:(e,t,n)=>{"use strict";n.d(t,{BuyDirectListingButton:()=>d});var a=n(95155),r=n(12115),i=n(32068),s=n(47131),o=n(41112),c=n(7571),l=n(97727),u=n(57857);function d(e){let{contractAddress:t,listingId:d,children:f,chain:m,client:y,quantity:p,payModal:v}=e,g=v?v.metadata:void 0,w=(0,l.useActiveAccount)(),b=(0,i.getContract)({address:t,client:y,chain:m}),{data:C}=(0,o.Q)(h,{contract:b,listingId:d,queryOptions:{enabled:!g}}),{mutateAsync:P}=(0,c.v)(),q=(0,r.useCallback)(async()=>{if(!w)throw Error("No account detected");let[e,{getApprovalForTransaction:t},{buyFromListing:a}]=await Promise.all([(0,s.t)({contract:b,listingId:d}),n.e(34281).then(n.bind(n,34281)),n.e(64984).then(n.bind(n,64984))]);if(!e)throw Error("Could not retrieve listing with ID: ".concat(d));let r=1n;if("ERC721"===e.asset.type){if("bigint"==typeof p&&(1n!==p||p<0n))throw Error("Invalid quantity. This is an ERC721 listing & quantity is always `1n`")}else if("ERC1155"===e.asset.type){if("bigint"==typeof p){if(p>e.quantity)throw Error("quantity exceeds available amount. Available: ".concat(e.quantity.toString()));if(p<0n)throw Error("Invalid quantity. Should be at least 1n");r=p}r=e.quantity}let i=a({contract:b,listingId:d,quantity:r,recipient:(null==w?void 0:w.address)||""}),o=await t({transaction:i,account:w});return o&&await P(o),i},[w,b,p,d,P]);return(0,a.jsx)(u.TransactionButton,{payModal:{metadata:g||C,...v},transaction:()=>q(),...e,children:f})}async function h(e){var t,n,a,r;let i=await (0,s.t)(e);return i?{name:null===(n=i.asset)||void 0===n?void 0:null===(t=n.metadata)||void 0===t?void 0:t.name,image:null===(r=i.asset)||void 0===r?void 0:null===(a=r.metadata)||void 0===a?void 0:a.image}:{name:void 0,image:void 0}}},61614:(e,t,n)=>{"use strict";n.d(t,{CreateDirectListingButton:()=>b});var a=n(95155),r=n(12115),i=n(32068),s=n(524),o=n(11936),c=n(92223),l=n(94648),u=n(9751),d=n(52204),h=n(62685),f=n(45022);let m=[{type:"tuple",name:"_params",components:[{type:"address",name:"assetContract"},{type:"uint256",name:"tokenId"},{type:"uint256",name:"quantity"},{type:"address",name:"currency"},{type:"uint256",name:"pricePerToken"},{type:"uint128",name:"startTimestamp"},{type:"uint128",name:"endTimestamp"},{type:"bool",name:"reserved"}]}],y=[{type:"uint256",name:"listingId"}];var p=n(41112),v=n(7571),g=n(97727),w=n(57857);function b(e){let{contractAddress:t,chain:b,client:P,children:q,payModal:x,assetContractAddress:A,tokenId:T}=e,O=(0,i.getContract)({address:t,chain:b,client:P}),k=(0,g.useActiveAccount)(),E=x?x.metadata:void 0,S=(0,i.getContract)({address:A,chain:b,client:P}),{data:I}=(0,p.Q)(C,{contract:S,tokenId:T,queryOptions:{enabled:!E}}),{mutateAsync:F}=(0,v.v)(),Q=(0,r.useCallback)(async()=>{var t;if(!k)throw Error("No account detected");let[a,r]=await Promise.all([(0,s.J)({contract:S}),(0,o.x)({contract:S})]);if(!r&&!a)throw Error("Asset must either be ERC721 or ERC1155");if(r){let[{isApprovedForAll:e},{setApprovalForAll:t}]=await Promise.all([n.e(45207).then(n.bind(n,45207)),n.e(42290).then(n.bind(n,42290))]);if(!await e({contract:S,operator:O.address,owner:k.address})){let e=t({contract:S,operator:O.address,approved:!0});await F(e)}}else{let[{isApprovedForAll:t},{setApprovalForAll:a},{getApproved:r}]=await Promise.all([n.e(46956).then(n.bind(n,46956)),n.e(29949).then(n.bind(n,29949)),n.e(83580).then(n.bind(n,83580))]),[i,s]=await Promise.all([t({contract:S,operator:O.address,owner:k.address}),r({contract:S,tokenId:e.tokenId})]);if(!i&&s.toLowerCase()!==O.address.toLowerCase()){let e=a({contract:S,operator:O.address,approved:!0});await F(e)}}return function(e){let t=(0,f.O)(async()=>"asyncParams"in e?await e.asyncParams():e);return(0,h.m)({contract:e.contract,method:["0x746415b5",m,y],params:async()=>[(await t()).params],value:async()=>(await t()).overrides?.value,accessList:async()=>(await t()).overrides?.accessList,gas:async()=>(await t()).overrides?.gas,gasPrice:async()=>(await t()).overrides?.gasPrice,maxFeePerGas:async()=>(await t()).overrides?.maxFeePerGas,maxPriorityFeePerGas:async()=>(await t()).overrides?.maxPriorityFeePerGas,nonce:async()=>(await t()).overrides?.nonce,extraGas:async()=>(await t()).overrides?.extraGas,erc20Value:async()=>(await t()).overrides?.erc20Value})}({contract:(t={contract:O,...e}).contract,asyncParams:async()=>{let e,a;let r=(0,i.getContract)({...t.contract,address:t.assetContractAddress}),h=(0,u.getRpcClient)(t.contract),[f,m,y]=await Promise.all([(0,s.J)({contract:r}),(0,o.x)({contract:r}),(0,l.w)(h,{blockTag:"latest"})]);if(!f&&!m)throw Error("AssetContract must implement ERC 1155 or ERC 721.");let p=BigInt(Math.floor((t.startTimestamp??new Date).getTime()/1e3)),v=BigInt(Math.floor((t.endTimestamp??new Date(Date.now()+31536e7)).getTime()/1e3));if(p<=y.timestamp&&(p=y.timestamp+1n),p>=v)throw Error("Start time must be before end time.");e=f?1n:t.quantity??1n;let g=t.currencyContractAddress??c.DG;if("pricePerToken"in t){if((0,c.dw)(g))a=(0,d.toUnits)(t.pricePerToken,18);else{let e=(0,i.getContract)({...t.contract,address:g}),{decimals:r}=await Promise.resolve().then(n.bind(n,44050)),s=await r({contract:e});a=(0,d.toUnits)(t.pricePerToken,s)}}else a=BigInt(t.pricePerTokenWei);return{params:{assetContract:t.assetContractAddress,tokenId:t.tokenId,currency:t.currencyContractAddress??c.DG,quantity:e,pricePerToken:a,startTimestamp:p,endTimestamp:v,reserved:t.isReservedListing??!1},overrides:{extraGas:50000n}}}})},[O,e,k,F,S]);return(0,a.jsx)(w.TransactionButton,{transaction:()=>Q(),payModal:{metadata:E||I,...x},...e,children:q})}async function C(e){var t,a,r,i;let[{getContractMetadata:c},{getNFT:l},{getNFT:u}]=await Promise.all([Promise.resolve().then(n.bind(n,22613)),Promise.resolve().then(n.bind(n,15358)),Promise.resolve().then(n.bind(n,61741))]),[d,h,f]=await Promise.all([(0,s.J)(e),(0,o.x)(e),c(e)]);if(d){let n=await l(e);return{image:null==n?void 0:null===(t=n.metadata)||void 0===t?void 0:t.image,name:null==n?void 0:null===(a=n.metadata)||void 0===a?void 0:a.name}}if(h){let t=await u(e);return{image:null==t?void 0:null===(r=t.metadata)||void 0===r?void 0:r.image,name:null==t?void 0:null===(i=t.metadata)||void 0===i?void 0:i.name}}return{image:null==f?void 0:f.image,name:null==f?void 0:f.name}}},81586:(e,t,n)=>{"use strict";function a(e,t=[]){return"object"==typeof e&&null!==e&&t.every(t=>t in e)}n.d(t,{C:()=>a})}}]);