"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[75203],{75203:(e,t,r)=>{r.d(t,{fetchProofsForClaimer:()=>P});var i=r(92223),n=r(10354),a=r(30798),s=r(73503),l=r(71165);class o{constructor(e){Object.defineProperty(this,"leaves",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"layers",{enumerable:!0,configurable:!0,writable:!0,value:[]}),this.leaves=e.map(e=>e instanceof Uint8Array?e:(0,a.aT)(e)),this.leaves=this.leaves.sort(l._T),this.createHashes(this.leaves)}getHexRoot(){return(0,n.EY)(this.getRoot())}getHexProof(e,t){return this.getProof(e,t).map(e=>(0,n.EY)(e.data))}createHashes(e){for(this.layers=[e];e.length>1;){let t=this.layers.length;this.layers.push([]);let r=e.length;for(let i=0;i<e.length;i+=2){if(i>=r){this.layers[t].push(...e.slice(r));break}if(i+1===e.length&&e.length%2==1){this.layers[t].push(e[i]);continue}let n=e[i],a=i+1===e.length?n:e[i+1],o=[n,a];o.sort(l._T);let c=(0,s.S)((0,l.VE)(o),"bytes");this.layers[t].push(c)}e=this.layers[t]}}getRoot(){return 0===this.layers.length?new Uint8Array:this.layers[this.layers.length-1][0]||new Uint8Array}getProof(e,t){if(void 0===e)throw Error("leaf is required");e=e instanceof Uint8Array?e:(0,a.aT)(e);let r=[];if(!Number.isInteger(t)){t=-1;for(let r=0;r<this.leaves.length;r++)(0,l.tv)(e,this.leaves[r])&&(t=r)}if(t<=-1)return[];for(let e=0;e<this.layers.length;e++){let i=this.layers[e],n=t%2,a=n?t-1:t+1;a<i.length&&r.push({position:n?"left":"right",data:i[a]}),t=t/2|0}return r}}var c=r(71937),h=r(59142),u=r(52204);function d(e){let{quantity:t,tokenDecimals:r}=e;return"unlimited"===t?h.Ao:(0,u.toUnits)(t,r)}var f=r(36991),y=r(61117),m=r(34354),g=r(16704),w=r(33085),b=r(98979),p=r(7702);async function v(e){let t=e.entry.currencyAddress||i.cF,n=await (async()=>{if((0,i.dw)(t)||t===i.cF)return 18;let[{getContract:n},{decimals:a}]=await Promise.all([Promise.resolve().then(r.bind(r,32068)),r.e(44050).then(r.bind(r,44050))]),s=n({address:t,chain:e.chain,client:e.client});return await a({contract:s})})();return(0,s.S)(function(e,t){if(e.length!==t.length)throw new f.YE({expectedLength:e.length,givenLength:t.length});let r=[];for(let i=0;i<e.length;i++){let n=e[i],a=t[i];r.push(function e(t,r,i=!1){if("address"===t){if(!(0,m.P)(r))throw new y.M({address:r});return(0,w.eV)(r.toLowerCase(),{size:i?32:null})}if("string"===t)return(0,b.i3)(r);if("bytes"===t)return r;if("bool"===t)return(0,w.eV)((0,b.$P)(r),{size:i?32:1});let n=t.match(p.Ge);if(n){let[e,t,a="256"]=n,s=Number.parseInt(a)/8;return(0,b.cK)(r,{size:i?32:s,signed:"int"===t})}let a=t.match(p.BD);if(a){let[e,t]=a;if(Number.parseInt(t)!==(r.length-2)/2)throw new f.BI({expectedSize:Number.parseInt(t),givenSize:(r.length-2)/2});return(0,w.eV)(r,{dir:"right",size:i?32:null})}let s=t.match(p.D5);if(s&&Array.isArray(r)){let[t,i]=s,n=[];for(let t=0;t<r.length;t++)n.push(e(i,r[t],!0));return 0===n.length?"0x":(0,g.aP)(n)}throw new f.Wl(t)}(n,a))}return(0,g.aP)(r)}(["address","uint256","uint256","address"],[e.entry.address,d({quantity:e.entry.maxClaimable||"unlimited",tokenDecimals:e.tokenDecimals}),d({quantity:e.entry.price||"unlimited",tokenDecimals:n}),t]))}async function P(e){let t;let{contract:n,merkleTreeUri:a,claimer:s}=e,l=e.hashEntry||v,h=await (0,c.download)({client:n.client,uri:a}),u=await h.json(),f=s.slice(2,2+u.shardNybbles).toLowerCase(),y=u.baseUri.endsWith("/")?u.baseUri:`${u.baseUri}/`;try{let e=`${y}${f}.json`,r=await (0,c.download)({client:n.client,uri:e});t=await r.json()}catch{return null}let m=new o(await Promise.all(t.entries.map(async t=>l({entry:t,chain:n.chain,client:n.client,tokenDecimals:e.tokenDecimals})))),g=t.entries.find(e=>e.address.toLowerCase()===s.toLowerCase());if(!g)return null;let w=m.getHexProof(await l({entry:g,chain:n.chain,client:n.client,tokenDecimals:e.tokenDecimals})).concat(t.proofs),b=g.currencyAddress||i.cF,p=await (async()=>{if((0,i.dw)(b)||b===i.cF)return 18;let[{getContract:e},{decimals:t}]=await Promise.all([Promise.resolve().then(r.bind(r,32068)),r.e(44050).then(r.bind(r,44050))]),a=e({address:b,chain:n.chain,client:n.client});return await t({contract:a})})();return{proof:w,quantityLimitPerWallet:d({quantity:g.maxClaimable||"unlimited",tokenDecimals:e.tokenDecimals}),pricePerToken:d({quantity:g.price||"unlimited",tokenDecimals:p}),currency:b}}}}]);